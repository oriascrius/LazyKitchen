<!DOCTYPE html>
<html lang="zh_TW">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" href="../assets/images/qoq-imgs/FaviconIcon.ico" type="image/x-icon" />
  <title>購物車</title>
  <!-- sweetalert2 -->
  <link href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css" rel="stylesheet" />
  <!-- 引入 AOS 的 CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css">
  <!-- Toastify JS 的 CSS 引入-->
  <!-- <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css"> -->
</head>

<body>
  <%- include('./layout/header'); -%>
    <main class="bigBg">
      <!-- banner -->
      <section class="bannerImg" data-aos="fade-left" data-aos-duration="600"></section>
      <!-- 購物車步驟 -->
      <section class="container">
        <div class="row">
          <div class="col">
            <ul class="shoppingSteps text-center list-unstyled m-0">
              <li class="current">
                <h3 class="m-0">STEP 1</h3>
                <h4 class="m-0">確認購物車</h4>
              </li>
              <li>
                <h3 class="m-0">STEP 2</h3>
                <h4 class="m-0">填寫訂單資訊</h4>
              </li>
              <li>
                <h3 class="m-0">STEP 3</h3>
                <h4 class="m-0">確認付款資訊</h4>
              </li>
              <li>
                <h3 class="m-0">STEP 4</h3>
                <h4 class="m-0">完成訂購</h4>
              </li>
            </ul>
          </div>
        </div>
      </section>
      <h2 class="m-0 text-center" style="padding-bottom: 40px; color:#AD4214;">購物清單</h2>
      <!-- 購物車清單 -->
      <section class="container">
        <ul class="row m-0 list-unstyled cartList">
          <li class="d-flex cartListProduct">
            <!-- 左側圖片、標題 -->
            <div class="col col-lg-5 d-flex align-items-center">
              <img src="../assets/images/qoq-imgs/carts-img_1.png" alt="韓式辣炒年糕" class="productImage">
              <h5 class="m-0 d-none d-lg-block">韓式辣炒年糕</h5>
            </div>
            <!-- 右側內容 lg -->
            <div class="col col-lg-7 d-none d-lg-flex align-items-center justify-content-between product"
              data-id="product-A" data-unit-price="168">
              <p class="m-0" id="unitPrice">$168</p>
              <div class="d-flex align-items-center product-quantity">
                <button class="minusBtn border-0">
                  <img src="../assets/images/qoq-imgs/minusBtn.png" alt="減號">
                </button>
                <div class="counter-value custom-fs4" id="counter">1</div>
                <button class="plusBtn border-0">
                  <img src="../assets/images/qoq-imgs/plusBtn.png" alt="加號">
                </button>
              </div>
              <p class="m-0 total-price" id="totalPrice">$168</p>
              <button class="btn p-0 delete-btn">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <g clip-path="url(#clip0_524_3968)">
                    <path
                      d="M4 8H20V21C20 21.2652 19.8946 21.5196 19.7071 21.7071C19.5196 21.8946 19.2652 22 19 22H5C4.73478 22 4.48043 21.8946 4.29289 21.7071C4.10536 21.5196 4 21.2652 4 21V8ZM6 10V20H18V10H6ZM9 12H11V18H9V12ZM13 12H15V18H13V12ZM7 5V3C7 2.73478 7.10536 2.48043 7.29289 2.29289C7.48043 2.10536 7.73478 2 8 2H16C16.2652 2 16.5196 2.10536 16.7071 2.29289C16.8946 2.48043 17 2.73478 17 3V5H22V7H2V5H7ZM9 4V5H15V4H9Z"
                      fill="#7E7E7E" />
                  </g>
                  <defs>
                    <clipPath id="clip0_524_3968">
                      <rect width="24" height="24" fill="white" />
                    </clipPath>
                  </defs>
                </svg>
              </button>
            </div>
            <!-- 右側內容 sm -->
            <div class="col d-flex d-lg-none flex-column justify-content-between product" data-id="product-A"
              data-unit-price="168">
              <div class="d-flex justify-content-between align-items-center">
                <h5 class="m-0">韓式辣炒年糕</h5>
                <button class="btn p-0 delete-btn">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <g clip-path="url(#clip0_524_3968)">
                      <path
                        d="M4 8H20V21C20 21.2652 19.8946 21.5196 19.7071 21.7071C19.5196 21.8946 19.2652 22 19 22H5C4.73478 22 4.48043 21.8946 4.29289 21.7071C4.10536 21.5196 4 21.2652 4 21V8ZM6 10V20H18V10H6ZM9 12H11V18H9V12ZM13 12H15V18H13V12ZM7 5V3C7 2.73478 7.10536 2.48043 7.29289 2.29289C7.48043 2.10536 7.73478 2 8 2H16C16.2652 2 16.5196 2.10536 16.7071 2.29289C16.8946 2.48043 17 2.73478 17 3V5H22V7H2V5H7ZM9 4V5H15V4H9Z"
                        fill="#7E7E7E" />
                    </g>
                    <defs>
                      <clipPath id="clip0_524_3968">
                        <rect width="24" height="24" fill="white" />
                      </clipPath>
                    </defs>
                  </svg>
                </button>
              </div>
              <p class="m-0" id="unitPrice">$168</p>
              <p class="m-0 total-price" id="totalPrice">$168</p>
              <div class="d-flex align-items-center product-quantity">
                <button class="minusBtn border-0">
                  <img src="../assets/images/qoq-imgs/minusBtn.png" alt="減號">
                </button>
                <div class="counter-value custom-fs4" id="counter">1</div>
                <button class="plusBtn border-0">
                  <img src="../assets/images/qoq-imgs/plusBtn.png" alt="加號">
                </button>
              </div>
            </div>
          </li>
          <li class="d-flex cartListProduct">
            <!-- 左側圖片、標題 -->
            <div class="col col-lg-5 d-flex align-items-center">
              <img src="../assets/images/qoq-imgs/carts-img_3.png" alt="宮保雞丁" class="productImage">
              <h5 class="m-0 d-none d-lg-block">宮保雞丁</h5>
            </div>
            <!-- 右側內容 lg -->
            <div class="col col-lg-7 d-none d-lg-flex align-items-center justify-content-between product"
              data-id="product-C" data-unit-price="128">
              <p class="m-0" id="unitPrice">$128</p>
              <div class="d-flex align-items-center product-quantity">
                <button class="minusBtn border-0">
                  <img src="../assets/images/qoq-imgs/minusBtn.png" alt="減號">
                </button>
                <div class="counter-value custom-fs4" id="counter">1</div>
                <button class="plusBtn border-0">
                  <img src="../assets/images/qoq-imgs/plusBtn.png" alt="加號">
                </button>
              </div>
              <p class="m-0 total-price" id="totalPrice">$128</p>
              <button class="btn p-0 delete-btn">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <g clip-path="url(#clip0_524_3968)">
                    <path
                      d="M4 8H20V21C20 21.2652 19.8946 21.5196 19.7071 21.7071C19.5196 21.8946 19.2652 22 19 22H5C4.73478 22 4.48043 21.8946 4.29289 21.7071C4.10536 21.5196 4 21.2652 4 21V8ZM6 10V20H18V10H6ZM9 12H11V18H9V12ZM13 12H15V18H13V12ZM7 5V3C7 2.73478 7.10536 2.48043 7.29289 2.29289C7.48043 2.10536 7.73478 2 8 2H16C16.2652 2 16.5196 2.10536 16.7071 2.29289C16.8946 2.48043 17 2.73478 17 3V5H22V7H2V5H7ZM9 4V5H15V4H9Z"
                      fill="#7E7E7E" />
                  </g>
                  <defs>
                    <clipPath id="clip0_524_3968">
                      <rect width="24" height="24" fill="white" />
                    </clipPath>
                  </defs>
                </svg>
              </button>
            </div>
            <!-- 右側內容 sm -->
            <div class="col d-flex d-lg-none flex-column justify-content-between product" data-id="product-C"
              data-unit-price="128">
              <div class="d-flex justify-content-between align-items-center">
                <h5 class="m-0">宮保雞丁</h5>
                <button class="btn p-0 delete-btn">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <g clip-path="url(#clip0_524_3968)">
                      <path
                        d="M4 8H20V21C20 21.2652 19.8946 21.5196 19.7071 21.7071C19.5196 21.8946 19.2652 22 19 22H5C4.73478 22 4.48043 21.8946 4.29289 21.7071C4.10536 21.5196 4 21.2652 4 21V8ZM6 10V20H18V10H6ZM9 12H11V18H9V12ZM13 12H15V18H13V12ZM7 5V3C7 2.73478 7.10536 2.48043 7.29289 2.29289C7.48043 2.10536 7.73478 2 8 2H16C16.2652 2 16.5196 2.10536 16.7071 2.29289C16.8946 2.48043 17 2.73478 17 3V5H22V7H2V5H7ZM9 4V5H15V4H9Z"
                        fill="#7E7E7E" />
                    </g>
                    <defs>
                      <clipPath id="clip0_524_3968">
                        <rect width="24" height="24" fill="white" />
                      </clipPath>
                    </defs>
                  </svg>
                </button>
              </div>
              <p class="m-0" id="unitPrice">$128</p>
              <p class="m-0 total-price" id="totalPrice">$128</p>
              <div class="d-flex align-items-center product-quantity">
                <button class="minusBtn border-0">
                  <img src="../assets/images/qoq-imgs/minusBtn.png" alt="減號">
                </button>
                <div class="counter-value custom-fs4" id="counter">1</div>
                <button class="plusBtn border-0">
                  <img src="../assets/images/qoq-imgs/plusBtn.png" alt="加號">
                </button>
              </div>
            </div>
          </li>
          <li class="d-flex cartListProduct">
            <!-- 左側圖片、標題 -->
            <div class="col col-lg-5 d-flex align-items-center">
              <img src="../assets/images/qoq-imgs/carts-img_4.png" alt="奶油雞肉燉飯" class="productImage">
              <h5 class="m-0 d-none d-lg-block">奶油雞肉燉飯</h5>
            </div>
            <!-- 右側內容 lg -->
            <div class="col col-lg-7 d-none d-lg-flex align-items-center justify-content-between product"
              data-id="product-D" data-unit-price="128">
              <p class="m-0" id="unitPrice">$128</p>
              <div class="d-flex align-items-center product-quantity">
                <button class="minusBtn border-0">
                  <img src="../assets/images/qoq-imgs/minusBtn.png" alt="減號">
                </button>
                <div class="counter-value custom-fs4" id="counter">1</div>
                <button class="plusBtn border-0">
                  <img src="../assets/images/qoq-imgs/plusBtn.png" alt="加號">
                </button>
              </div>
              <p class="m-0 total-price" id="totalPrice">$128</p>
              <button class="btn p-0 delete-btn">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <g clip-path="url(#clip0_524_3968)">
                    <path
                      d="M4 8H20V21C20 21.2652 19.8946 21.5196 19.7071 21.7071C19.5196 21.8946 19.2652 22 19 22H5C4.73478 22 4.48043 21.8946 4.29289 21.7071C4.10536 21.5196 4 21.2652 4 21V8ZM6 10V20H18V10H6ZM9 12H11V18H9V12ZM13 12H15V18H13V12ZM7 5V3C7 2.73478 7.10536 2.48043 7.29289 2.29289C7.48043 2.10536 7.73478 2 8 2H16C16.2652 2 16.5196 2.10536 16.7071 2.29289C16.8946 2.48043 17 2.73478 17 3V5H22V7H2V5H7ZM9 4V5H15V4H9Z"
                      fill="#7E7E7E" />
                  </g>
                  <defs>
                    <clipPath id="clip0_524_3968">
                      <rect width="24" height="24" fill="white" />
                    </clipPath>
                  </defs>
                </svg>
              </button>
            </div>
            <!-- 右側內容 sm -->
            <div class="col d-flex d-lg-none flex-column justify-content-between product" data-id="product-D"
              data-unit-price="128">
              <div class="d-flex justify-content-between align-items-center">
                <h5 class="m-0">奶油雞肉燉飯</h5>
                <button class="btn p-0 delete-btn">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <g clip-path="url(#clip0_524_3968)">
                      <path
                        d="M4 8H20V21C20 21.2652 19.8946 21.5196 19.7071 21.7071C19.5196 21.8946 19.2652 22 19 22H5C4.73478 22 4.48043 21.8946 4.29289 21.7071C4.10536 21.5196 4 21.2652 4 21V8ZM6 10V20H18V10H6ZM9 12H11V18H9V12ZM13 12H15V18H13V12ZM7 5V3C7 2.73478 7.10536 2.48043 7.29289 2.29289C7.48043 2.10536 7.73478 2 8 2H16C16.2652 2 16.5196 2.10536 16.7071 2.29289C16.8946 2.48043 17 2.73478 17 3V5H22V7H2V5H7ZM9 4V5H15V4H9Z"
                        fill="#7E7E7E" />
                    </g>
                    <defs>
                      <clipPath id="clip0_524_3968">
                        <rect width="24" height="24" fill="white" />
                      </clipPath>
                    </defs>
                  </svg>
                </button>
              </div>
              <p class="m-0" id="unitPrice">$128</p>
              <p class="m-0 total-price" id="totalPrice">$128</p>
              <div class="d-flex align-items-center product-quantity">
                <button class="minusBtn border-0">
                  <img src="../assets/images/qoq-imgs/minusBtn.png" alt="減號">
                </button>
                <div class="counter-value custom-fs4" id="counter">1</div>
                <button class="plusBtn border-0">
                  <img src="../assets/images/qoq-imgs/plusBtn.png" alt="加號">
                </button>
              </div>
            </div>
          </li>
          <li class="d-flex cartListProduct">
            <!-- 左側圖片、標題 -->
            <div class="col col-lg-5 d-flex align-items-center">
              <img src="../assets/images/qoq-imgs/carts-img_2.png" alt="滷牛腱" class="productImage">
              <h5 class="m-0 d-none d-lg-block">滷牛腱</h5>
            </div>
            <!-- 右側內容 lg -->
            <div class="col col-lg-7 d-none d-lg-flex align-items-center justify-content-between product"
              data-id="product-B" data-unit-price="228">
              <p class="m-0" id="unitPrice">$228</p>
              <div class="d-flex align-items-center product-quantity">
                <button class="minusBtn border-0">
                  <img src="../assets/images/qoq-imgs/minusBtn.png" alt="減號">
                </button>
                <div class="counter-value custom-fs4" id="counter">1</div>
                <button class="plusBtn border-0">
                  <img src="../assets/images/qoq-imgs/plusBtn.png" alt="加號">
                </button>
              </div>
              <p class="m-0 total-price" id="totalPrice">$228</p>
              <button class="btn p-0 delete-btn">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <g clip-path="url(#clip0_524_3968)">
                    <path
                      d="M4 8H20V21C20 21.2652 19.8946 21.5196 19.7071 21.7071C19.5196 21.8946 19.2652 22 19 22H5C4.73478 22 4.48043 21.8946 4.29289 21.7071C4.10536 21.5196 4 21.2652 4 21V8ZM6 10V20H18V10H6ZM9 12H11V18H9V12ZM13 12H15V18H13V12ZM7 5V3C7 2.73478 7.10536 2.48043 7.29289 2.29289C7.48043 2.10536 7.73478 2 8 2H16C16.2652 2 16.5196 2.10536 16.7071 2.29289C16.8946 2.48043 17 2.73478 17 3V5H22V7H2V5H7ZM9 4V5H15V4H9Z"
                      fill="#7E7E7E" />
                  </g>
                  <defs>
                    <clipPath id="clip0_524_3968">
                      <rect width="24" height="24" fill="white" />
                    </clipPath>
                  </defs>
                </svg>
              </button>
            </div>
            <!-- 右側內容 sm -->
            <div class="col d-flex d-lg-none flex-column justify-content-between product" data-id="product-B"
              data-unit-price="228">
              <div class="d-flex justify-content-between align-items-center">
                <h5 class="m-0">滷牛腱</h5>
                <button class="btn p-0 delete-btn">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <g clip-path="url(#clip0_524_3968)">
                      <path
                        d="M4 8H20V21C20 21.2652 19.8946 21.5196 19.7071 21.7071C19.5196 21.8946 19.2652 22 19 22H5C4.73478 22 4.48043 21.8946 4.29289 21.7071C4.10536 21.5196 4 21.2652 4 21V8ZM6 10V20H18V10H6ZM9 12H11V18H9V12ZM13 12H15V18H13V12ZM7 5V3C7 2.73478 7.10536 2.48043 7.29289 2.29289C7.48043 2.10536 7.73478 2 8 2H16C16.2652 2 16.5196 2.10536 16.7071 2.29289C16.8946 2.48043 17 2.73478 17 3V5H22V7H2V5H7ZM9 4V5H15V4H9Z"
                        fill="#7E7E7E" />
                    </g>
                    <defs>
                      <clipPath id="clip0_524_3968">
                        <rect width="24" height="24" fill="white" />
                      </clipPath>
                    </defs>
                  </svg>
                </button>
              </div>
              <p class="m-0" id="unitPrice">$228</p>
              <p class="m-0 total-price" id="totalPrice">$228</p>
              <div class="d-flex align-items-center product-quantity">
                <button class="minusBtn border-0">
                  <img src="../assets/images/qoq-imgs/minusBtn.png" alt="減號">
                </button>
                <div class="counter-value custom-fs4" id="counter">1</div>
                <button class="plusBtn border-0">
                  <img src="../assets/images/qoq-imgs/plusBtn.png" alt="加號">
                </button>
              </div>
            </div>
          </li>
          <li class="d-flex cartListProduct">
            <!-- 左側圖片、標題 -->
            <div class="col col-lg-5 d-flex align-items-center">
              <img src="../assets/images/qoq-imgs/carts-img_5.png" alt="松露薯條" class="productImage">
              <h5 class="m-0 d-none d-lg-block">松露薯條</h5>
            </div>
            <!-- 右側內容 lg -->
            <div class="col col-lg-7 d-none d-lg-flex align-items-center justify-content-between product"
              data-id="product-E" data-unit-price="98">
              <p class="m-0" id="unitPrice">$98</p>
              <div class="d-flex align-items-center product-quantity">
                <button class="minusBtn border-0">
                  <img src="../assets/images/qoq-imgs/minusBtn.png" alt="減號">
                </button>
                <div class="counter-value custom-fs4" id="counter">1</div>
                <button class="plusBtn border-0">
                  <img src="../assets/images/qoq-imgs/plusBtn.png" alt="加號">
                </button>
              </div>
              <p class="m-0 total-price" id="totalPrice">$98</p>
              <button class="btn p-0 delete-btn">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <g clip-path="url(#clip0_524_3968)">
                    <path
                      d="M4 8H20V21C20 21.2652 19.8946 21.5196 19.7071 21.7071C19.5196 21.8946 19.2652 22 19 22H5C4.73478 22 4.48043 21.8946 4.29289 21.7071C4.10536 21.5196 4 21.2652 4 21V8ZM6 10V20H18V10H6ZM9 12H11V18H9V12ZM13 12H15V18H13V12ZM7 5V3C7 2.73478 7.10536 2.48043 7.29289 2.29289C7.48043 2.10536 7.73478 2 8 2H16C16.2652 2 16.5196 2.10536 16.7071 2.29289C16.8946 2.48043 17 2.73478 17 3V5H22V7H2V5H7ZM9 4V5H15V4H9Z"
                      fill="#7E7E7E" />
                  </g>
                  <defs>
                    <clipPath id="clip0_524_3968">
                      <rect width="24" height="24" fill="white" />
                    </clipPath>
                  </defs>
                </svg>
              </button>
            </div>
            <!-- 右側內容 sm -->
            <div class="col d-flex d-lg-none flex-column justify-content-between product" data-id="product-E"
              data-unit-price="98">
              <div class="d-flex justify-content-between align-items-center">
                <h5 class="m-0">松露薯條</h5>
                <button class="btn p-0 delete-btn">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <g clip-path="url(#clip0_524_3968)">
                      <path
                        d="M4 8H20V21C20 21.2652 19.8946 21.5196 19.7071 21.7071C19.5196 21.8946 19.2652 22 19 22H5C4.73478 22 4.48043 21.8946 4.29289 21.7071C4.10536 21.5196 4 21.2652 4 21V8ZM6 10V20H18V10H6ZM9 12H11V18H9V12ZM13 12H15V18H13V12ZM7 5V3C7 2.73478 7.10536 2.48043 7.29289 2.29289C7.48043 2.10536 7.73478 2 8 2H16C16.2652 2 16.5196 2.10536 16.7071 2.29289C16.8946 2.48043 17 2.73478 17 3V5H22V7H2V5H7ZM9 4V5H15V4H9Z"
                        fill="#7E7E7E" />
                    </g>
                    <defs>
                      <clipPath id="clip0_524_3968">
                        <rect width="24" height="24" fill="white" />
                      </clipPath>
                    </defs>
                  </svg>
                </button>
              </div>
              <p class="m-0" id="unitPrice">$98</p>
              <p class="m-0 total-price" id="totalPrice">$98</p>
              <div class="d-flex align-items-center product-quantity">
                <button class="minusBtn border-0">
                  <img src="../assets/images/qoq-imgs/minusBtn.png" alt="減號">
                </button>
                <div class="counter-value custom-fs4" id="counter">1</div>
                <button class="plusBtn border-0">
                  <img src="../assets/images/qoq-imgs/plusBtn.png" alt="加號">
                </button>
              </div>
            </div>
          </li>
        </ul>
        <div class="d-flex justify-content-end align-items-center cart-totalPrice">
          <h4 class="m-0">總金額</h4>
          <p id="grandTotal" class="custom-fs4"></p>
        </div>
        <ul class="cartBtn list-unstyled text-center">
          <li>
            <a href="./productOverview.html" class="custom-fs4">繼續購物</a>
          </li>
          <li>
            <a href="./orderInfo.html" class="custom-fs4" id="saveCart">訂單結帳</a>
          </li>
        </ul>
      </section>
    </main>
    <%- include('./layout/footer'); -%>


      <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
      <!-- sweetalert2 -->
      <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
      <!-- 引入 AOS 的 JavaScript -->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>
      <!-- Toastify JS 的 JS 引入  -->
      <!-- <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script> -->
      <script type="module" src="../qoq-main.js"></script>
      <script>
        $(document).ready(function () {
          // 計算總金額
          function updateGrandTotal() {
            let grandTotal = 0;
            const productTotals = {};

            // 計算每個商品的總價
            $(".product:visible").each(function () {
              const productId = $(this).data("id");
              const totalPrice = parseInt(
                $(this).find(".total-price").text().replace("$", "")
              );

              // 記錄每個商品的總價
              if (productTotals[productId]) {
                productTotals[productId] += totalPrice;
              } else {
                productTotals[productId] = totalPrice;
              }
            });

            // 累加總金額
            for (const id in productTotals) {
              grandTotal += productTotals[id];
            }

            $("#grandTotal").text(`$  ${grandTotal}`);
          }

          // 處理商品數量的變動
          $(".product-quantity button").click(function () {
            const product = $(this).closest(".product");
            const productId = product.data("id");
            const unitPrice = parseInt(product.data("unit-price")); // 獲取單價
            const counter = product.find(".counter-value");
            let value = parseInt(counter.text());

            // 增加或減少數量
            if ($(this).hasClass("plusBtn") && value < 9) {
              value += 1;
            } else if ($(this).hasClass("minusBtn")) {
              if (value > 1) {
                value -= 1;
              } else if (value === 1) {
                // 當數量為1時，點擊減號按鈕會刪除該商品
                const listItem = $(this).closest(".cartListProduct"); // 获取最近的cartListProduct元素
                Swal.fire({
                  title: "確定要刪除這個商品嗎？",
                  icon: "warning",
                  showCancelButton: true,
                  confirmButtonColor: "#7E7E7E",
                  cancelButtonColor: "#AD4214",
                  confirmButtonText: "確定",
                  cancelButtonText: "取消",
                  customClass: {
                    popup: "swal2-small-popup", // 使用自定義類來調整小視窗
                    title: "swal2-small-title", // 調整標題大小
                  },
                }).then((result) => {
                  // 刪除按鈕跳出的對話框的結果
                  if (result.isConfirmed) {
                    Swal.fire({
                      title: "商品已刪除！",
                      icon: "success",
                      showConfirmButton: false,
                      timer: 1000,
                      position: "top",
                      toast: true,
                    });
                    if (listItem.length) {
                      listItem.remove(); // 刪除該商品的li元素
                      updateGrandTotal(); // 刪除後更新總計
                    }
                  }
                });
                return; // 停止後續執行，避免在刪除後還繼續更新價格
              }
            }

            // 同步更新相同 data-id 的其他元素
            $(`.product[data-id="${productId}"] .counter-value`).text(value);

            // 更新單一商品的總價
            const totalPrice = unitPrice * value;
            $(`.product[data-id="${productId}"] .total-price`).text("$" + totalPrice);

            // 更新所有商品的總計
            updateGrandTotal();
          });

          // 刪除功能 + 刪除確認對話框
          const deleteButtons = $(".delete-btn");

          deleteButtons.each(function () {
            $(this).on("click", function (event) {
              event.preventDefault(); // 防止按鈕的預設行為
              const listItem = $(this).closest(".cartListProduct"); // 获取最近的cartListProduct元素

              // 顯示 SweetAlert2 確認對話框
              Swal.fire({
                title: "確定要取消這個商品嗎？",
                icon: "warning",
                showCancelButton: true,
                confirmButtonColor: "#7E7E7E",
                cancelButtonColor: "#AD4214",
                confirmButtonText: "確定",
                cancelButtonText: "取消",
              }).then((result) => {
                if (result.isConfirmed) {
                  Swal.fire({
                    title: "商品已取消！",
                    icon: "success",
                    showConfirmButton: false,
                    timer: 1000,
                    position: "top",
                    toast: true,
                  });
                  // 刪除商品並更新總計
                  if (listItem.length) {
                    listItem.remove();
                    updateGrandTotal();
                  }
                }
              });
            });
          });

          // 初次載入頁面時更新總計
          updateGrandTotal();
        });
      </script>
      <!-- Toastify JS -->
      <!-- <script>
        // 商品 + 1
        const plusBtn_buttons = document.querySelectorAll('.plusBtn'); // 選取所有減少按鈕
        const plusBtn_counterElement = document.getElementById('counter'); // 獲取顯示數量的元素

        plusBtn_buttons.forEach(button => {
          button.addEventListener('click', function () {
            const plusBtn_currentCount = parseInt(plusBtn_counterElement.textContent, 10); // 獲取當前數量並轉換為整數

            // 判斷當前數量是否小於或等於 9
            if (plusBtn_currentCount >= 9) {
              // 如果小於或等於 9，不觸發吐司提醒，直接返回
              return;
            }

            // 顯示吐司提醒
            Toastify({
              text: "商品增加一個！",
              duration: 3000, // 持續時間，單位是毫秒
              gravity: "top", // 吐司出現的位置，top 或 bottom
              position: 'right', // 吐司在螢幕中的位置，left、center 或 right
              style: {
                background: "linear-gradient(to right, #00b09b, #96c93d)" // 使用 style.background 設置背景顏色
              },
              stopOnFocus: true, // 滑鼠懸停時是否停止計時
            }).showToast();

            // 減少數量
            // counterElement.textContent = currentCount - 1; // 更新顯示的數量
          });
        });
        // ------------------------------------------------------
        // 商品 - 1
        const minusBtn_buttons = document.querySelectorAll('.minusBtn'); // 選取所有減少按鈕
        const minusBtn_counterElement = document.getElementById('counter'); // 獲取顯示數量的元素

        minusBtn_buttons.forEach(button => {
          button.addEventListener('click', function () {
            const minusBtn_currentCount = parseInt(minusBtn_counterElement.textContent, 10); // 獲取當前數量並轉換為整數

            // 判斷當前數量是否小於或等於 1
            if (minusBtn_currentCount <= 1) {
              // 如果小於或等於 1，不觸發吐司提醒，直接返回
              return;
            }

            // 顯示吐司提醒
            Toastify({
              text: "商品減少一個！",
              duration: 3000, // 持續時間，單位是毫秒
              gravity: "top", // 吐司出現的位置，top 或 bottom
              position: 'right', // 吐司在螢幕中的位置，left、center 或 right
              style: {
                background: "linear-gradient(to right, #ff3f34, #ffafbd)" // 使用 style.background 設置背景顏色
              },
              stopOnFocus: true, // 滑鼠懸停時是否停止計時
            }).showToast();

            // 減少數量
            // counterElement.textContent = currentCount - 1; // 更新顯示的數量
          });
        });
      </script> -->
</body>

</html>